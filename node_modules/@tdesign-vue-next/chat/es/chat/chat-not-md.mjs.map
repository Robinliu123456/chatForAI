{"version":3,"file":"chat-not-md.mjs","sources":["../../src/chat/chat-not-md.tsx"],"sourcesContent":["import { defineComponent, computed } from 'vue';\nimport props from './props';\n\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\nconst getEscapeReplacement = (ch: string): string => escapeReplacements[ch as keyof typeof escapeReplacements];\n\nfunction escape(html: string, encode = false): string {\n  const escapeTest = encode ? /[&<>\"']/ : /[<>\"']|&(?!#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);/;\n  return html.replace(escapeTest, getEscapeReplacement);\n}\n\nexport default defineComponent({\n  name: 'TChatContent',\n  props,\n  setup(props) {\n    const textInfo = computed(() => {\n      return escape(props.content || '');\n    });\n\n    return () => (\n      <div>\n        {props.role === 'user' ? (\n          <div class=\"user\">\n            <pre>{textInfo.value}</pre>\n          </div>\n        ) : (\n          <div class=\"assistant\">\n            <div class={['content', props.role]} v-html={textInfo.value}></div>\n          </div>\n        )}\n        {props.role === 'assistant' && props.textLoading && (\n          <t-loading class=\"text-loading\" size=\"120px\" loading={props.textLoading}></t-loading>\n        )}\n      </div>\n    );\n  },\n});\n"],"names":["escapeReplacements","getEscapeReplacement","ch","escape","html","encode","arguments","length","undefined","escapeTest","replace","defineComponent","name","props","setup","textInfo","computed","content","_createVNode","role","value","textLoading","_resolveComponent"],"mappings":";;;;;;;;;AAGA,IAAMA,kBAAqB,GAAA;AACzB,EAAA,GAAK,EAAA,OAAA;AACL,EAAA,GAAK,EAAA,MAAA;AACL,EAAA,GAAK,EAAA,MAAA;AACL,EAAA,GAAK,EAAA,QAAA;AACL,EAAA,GAAK,EAAA,OAAA;AACP,CAAA,CAAA;AACA,IAAMC,oBAAA,GAAuB,SAAvBA,oBAAAA,CAAwBC,EAAA,EAAA;EAAA,OAAuBF,kBAAmB,CAAAE,EAAA,CAAA,CAAA;AAAA,CAAA,CAAA;AAExE,SAASC,MAAAA,CAAOC,IAAc,EAAwB;AAAA,EAAA,IAAxBC,MAAA,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAS,KAAe,CAAA;AAC9C,EAAA,IAAAG,UAAA,GAAaJ,SAAS,SAAY,GAAA,iDAAA,CAAA;AACjC,EAAA,OAAAD,IAAA,CAAKM,OAAQ,CAAAD,UAAA,EAAYR,oBAAoB,CAAA,CAAA;AACtD,CAAA;AAEA,gBAAeU,eAAgB,CAAA;AAC7BC,EAAAA,IAAM,EAAA,cAAA;AACNC,EAAAA,KAAA,EAAAA,KAAA;EACAC,qBAAMD,CAAAA,MAAO,EAAA;AACL,IAAA,IAAAE,QAAA,GAAWC,SAAS,YAAM;AACvB,MAAA,OAAAb,MAAA,CAAOU,MAAM,CAAAI,OAAA,IAAW,EAAE,CAAA,CAAA;AACnC,KAAC,CAAA,CAAA;IAED,OAAO,YAAA;MAAA,OAAAC,WAAA,eAEFL,MAAM,CAAAM,IAAA,KAAS,MACd,GAAAD,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAA,MAAA;AAAA,OAAA,EAAA,CAAAA,WAAA,CACQH,KAAAA,EAAAA,IAAAA,EAAAA,CAAAA,QAAA,CAASK,KAAM,OAAAF,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAA,WAAA;AAAA,OAAA,EAAA,CAAAA,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAIT,CAAC,SAAA,EAAWL,MAAM,CAAAM,IAAI,CAAG;AAAA,QAAA,WAAA,EAAQJ,QAAS,CAAAK,KAAAA;AAAA,OAAA,EAAA,IAAA,CAAA,CAAA,CADvD,EAIFP,MAAM,CAAAM,IAAA,KAAS,WAAeN,IAAAA,MAAAA,CAAMQ,WACnC,IAAAH,WAAA,CAAAI,gBAAA,CAAA,WAAA,CAAA,EAAA;AAAA,QAAA,OAAA,EAAA,cAAA;AAAA,QAAA,MAAA,EAAA,OAAA;AAAA,QAAA,SAAA,EAAsDT,OAAMQ,WAAAA;OAAa,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA;KAX5E,CAAA;AAeL,GAAA;AACF,CAAC,CAAA;;;;"}