/**
 * tdesign-vue-chat v0.1.4
 * (c) 2024 tdesign
 * @license MIT
 */

import { defineComponent, createVNode } from 'vue';
import props from './props.mjs';
import _Chat from './chat.mjs';
import ChatItem from './chat-item.mjs';
import _ChatInput from './chat-input.mjs';
import _ChatAction from './chat-action.mjs';
import { useChat } from './useChat.mjs';
import '../_chunks/dep-820ccf03.mjs';
import '../_chunks/dep-36315193.mjs';
import '../hooks/useConfig.mjs';
import '../config-provider/useConfig.mjs';
import '../_chunks/dep-5da300bf.mjs';
import '../_chunks/dep-b3ff3ff0.mjs';
import '../_chunks/dep-91b2e8c1.mjs';
import '../_chunks/dep-a44dea60.mjs';
import '../_chunks/dep-e8d61826.mjs';
import '../_chunks/dep-b1f97c25.mjs';
import '../_chunks/dep-ac3040d2.mjs';
import '../_chunks/dep-18b739ba.mjs';
import '../_chunks/dep-f5265842.mjs';
import '../_chunks/dep-b17ed138.mjs';
import '../_chunks/dep-d42887a6.mjs';
import '../_chunks/dep-98e16d65.mjs';
import '../_chunks/dep-819a683b.mjs';
import '../_chunks/dep-7fe9d1a7.mjs';
import '../_chunks/dep-ffc8118c.mjs';
import '../_chunks/dep-a7a306cf.mjs';
import '../_chunks/dep-9a795619.mjs';
import '../_chunks/dep-04387f3b.mjs';
import '../_chunks/dep-fd60d91e.mjs';
import '../config-provider/context.mjs';
import '../_chunks/dep-fcce85a1.mjs';
import '../_chunks/dep-156e5aba.mjs';
import '../_common/js/global-config/default-config.mjs';
import '../_common/js/global-config/locale/zh_CN.mjs';
import '../_chunks/dep-908cd063.mjs';
import '../_chunks/dep-0b9922e8.mjs';
import '../_chunks/dep-90d16745.mjs';
import '../hooks/tnode.mjs';
import '../_chunks/dep-766eae6c.mjs';
import '../_chunks/dep-1e206b34.mjs';
import '../_chunks/dep-fb621f24.mjs';
import '../_chunks/dep-76d61a9c.mjs';
import '../_chunks/dep-f8303dbc.mjs';
import '../_chunks/dep-4f9d456f.mjs';
import '../utils/render-tnode.mjs';
import 'tdesign-vue-next';
import './chat-content.mjs';
import 'clipboard';
import 'highlight.js';
import 'marked';
import 'marked-highlight';
import './chat-loading.mjs';
import '../_chunks/dep-45b3ff0f.mjs';
import '../_chunks/dep-1bdabac1.mjs';
import 'tdesign-icons-vue-next';
import '../hooks/useVModel.mjs';
import './util.mjs';
import '../_chunks/dep-5d656949.mjs';
import '../_chunks/dep-44f86eea.mjs';
import './sseRequest.mjs';
import '../_chunks/dep-d1c71771.mjs';
import './sseRequest-hunyuan.mjs';

var _ChatMofa = defineComponent({
  name: "TChatMofa",
  components: {
    Chat: _Chat,
    ChatItem: ChatItem,
    ChatInput: _ChatInput,
    ChatAction: _ChatAction
  },
  props: {
    apiKey: {
      type: String
    },
    mofaId: {
      type: String,
      required: true
    },
    welcome: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    userMeta: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    assistantMeta: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    footer: {
      type: Boolean,
      "default": true
    },
    showUserMsg: {
      type: Boolean,
      "default": true
    },
    operationBtn: props.operationBtn,
    chatRequest: {
      type: Function
    },
    layout: props.layout,
    onOperation: props.onOperation
  },
  emits: ["operation", "clear"],
  setup: function setup(props2, _ref) {
    var emit = _ref.emit;
    var _useChat = useChat(props2, emit),
      chatList = _useChat.chatList,
      loading = _useChat.loading,
      onStop = _useChat.onStop,
      operation = _useChat.operation,
      clearConfirm = _useChat.clearConfirm,
      isStreamLoad = _useChat.isStreamLoad,
      sendRequest = _useChat.sendRequest;
    var handleSend = function handleSend(inputValue) {
      sendRequest("mofa", inputValue, props2.mofaId);
    };
    return function () {
      return createVNode(_Chat, {
        "layout": props2.layout,
        "clearHistory": chatList.value.length > 0 && !isStreamLoad.value,
        "onClear": clearConfirm
      }, {
        "default": function _default() {
          return [chatList.value.map(function (item, index) {
            return createVNode(ChatItem, {
              "key": index,
              "avatar": item.avatar,
              "role": item.role,
              "datetime": item.datetime,
              "content": item.content,
              "text-loading": index === 0 && loading.value
            }, {
              actions: function actions() {
                return createVNode(_ChatAction, {
                  "operationBtn": props2.operationBtn,
                  "content": item.content,
                  "onOperation": function onOperation(type, _ref2) {
                    var e = _ref2.e;
                    return operation(type, {
                      e: e,
                      index: index
                    });
                  }
                }, null);
              }
            });
          })];
        },
        footer: function footer() {
          return createVNode(_ChatInput, {
            "stopDisabled": isStreamLoad.value,
            "onSend": handleSend,
            "onStop": onStop
          }, null);
        }
      });
    };
  }
});

export { _ChatMofa as default };
//# sourceMappingURL=chat-mofa.mjs.map
